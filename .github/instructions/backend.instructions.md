# Backend Instructions

## Technology Stack

- Go 1.25.0+
- Cobra for CLI handling
- Logrus for logging
- Mockery v2.53.5+ for generating test mocks
- Testify for testing (assertions and mocking)

## Folder Structure

- `/cmd/cvwonder`: Main application entry point and CLI commands (generate, serve, themes, validate, version).
- `/internal`: Application logic organized by domain:
  - `/cvparser`: YAML CV parsing logic.
  - `/cvrender`: Rendering logic (HTML and PDF).
  - `/cvserve`: Local web server with file watching.
  - `/model`: CV data structures.
  - `/themes`: Theme management (install, create, list, verify).
  - `/validator`: JSON schema validation.
  - `/utils`: Shared utilities (auth, logger, config).
  - `/version`: Version information.
  - `/watcher`: File system watching.
  - `/fixtures`: Test fixtures.
- `/docs`: Documentation (Docusaurus site in `github-pages/`).
- `/themes`: Built-in and example themes.
- `/generated`: Output directory for generated CVs (gitignored).

## Unit Tests

- Write unit tests for all functions and methods.
- Store tests in the same package directory as the code (`*_test.go`).
- Do not create a separate `tests` directory.
- Use mocks generated by Mockery (stored in `mocks/` subdirectories).
- Use Testify for assertions and mock objects.

## Interfaces

- Define interfaces for testability (e.g., `ParserInterface`, `RenderInterface`).
- Store interface definitions in files named `*_iface.go`.
- Generate mocks using Mockery for all interfaces.

# Build

Build the project from the root directory:

```bash
go build -o cvwonder ./cmd/cvwonder
```

Or use the Makefile:

```bash
make build
```
